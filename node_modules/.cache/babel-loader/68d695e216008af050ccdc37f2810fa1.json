{"ast":null,"code":"import { BackgroundImage } from \"../types/BackgroundImage.js\";\nimport { Animatable } from \"../../animation/Animatable/Animatable.js\";\n/** @internal */\n\nexport function imagePatternPropsForFill(fill, frame, id) {\n  fill = Animatable.get(fill, \"#09F\");\n  if (!BackgroundImage.isImageObject(fill)) return undefined;\n  if (!fill.pixelWidth || !fill.pixelHeight) return undefined;\n  const imageWidth = fill.pixelWidth;\n  const imageHeight = fill.pixelHeight;\n  let transform;\n  const {\n    fit\n  } = fill;\n\n  if (fit === \"fill\" || fit === \"fit\" || !fit) {\n    let scaleX = 1;\n    let scaleY = 1;\n    let offsetX = 0;\n    let offsetY = 0;\n    const imageRatio = imageWidth / imageHeight;\n    const realWidth = frame.height * imageRatio;\n    const realHeight = frame.width / imageRatio;\n    const validScaleX = realWidth / frame.width;\n    const validScaleY = realHeight / frame.height;\n\n    if (fit === \"fill\" || !fit ? validScaleY > validScaleX : validScaleY < validScaleX) {\n      scaleY = validScaleY;\n      offsetY = (1 - validScaleY) / 2;\n    } else {\n      scaleX = validScaleX;\n      offsetX = (1 - validScaleX) / 2;\n    }\n\n    transform = `translate(${offsetX}, ${offsetY}) scale(${scaleX}, ${scaleY})`;\n  }\n\n  const imageId = `id${id}g${\"-fillImage\"}`;\n  return {\n    id: imageId,\n    path: fill.src,\n    transform\n  };\n}","map":{"version":3,"mappings":"AAGA,SAASA,eAAT,QAAgC,6BAAhC;AACA,SAASC,UAAT,QAA2B,0CAA3B;AAEA;;AACA,OAAM,SAAUC,wBAAV,CACFC,IADE,EAEFC,KAFE,EAGFC,EAHE,EAGQ;AAEVF,MAAI,GAAGF,UAAU,CAACK,GAAX,CAAeH,IAAf,EAAqB,MAArB,CAAP;AAEA,MAAI,CAACH,eAAe,CAACO,aAAhB,CAA8BJ,IAA9B,CAAL,EAA0C,OAAOK,SAAP;AAC1C,MAAI,CAACL,IAAI,CAACM,UAAN,IAAoB,CAACN,IAAI,CAACO,WAA9B,EAA2C,OAAOF,SAAP;AAE3C,QAAMG,UAAU,GAAGR,IAAI,CAACM,UAAxB;AACA,QAAMG,WAAW,GAAGT,IAAI,CAACO,WAAzB;AAEA,MAAIG,SAAJ;AACA,QAAM;AAAEC;AAAF,MAAUX,IAAhB;;AAEA,MAAIW,GAAG,KAAK,MAAR,IAAkBA,GAAG,KAAK,KAA1B,IAAmC,CAACA,GAAxC,EAA6C;AACzC,QAAIC,MAAM,GAAG,CAAb;AACA,QAAIC,MAAM,GAAG,CAAb;AACA,QAAIC,OAAO,GAAG,CAAd;AACA,QAAIC,OAAO,GAAG,CAAd;AAEA,UAAMC,UAAU,GAAGR,UAAU,GAAGC,WAAhC;AACA,UAAMQ,SAAS,GAAGhB,KAAK,CAACiB,MAAN,GAAeF,UAAjC;AACA,UAAMG,UAAU,GAAGlB,KAAK,CAACmB,KAAN,GAAcJ,UAAjC;AACA,UAAMK,WAAW,GAAGJ,SAAS,GAAGhB,KAAK,CAACmB,KAAtC;AACA,UAAME,WAAW,GAAGH,UAAU,GAAGlB,KAAK,CAACiB,MAAvC;;AAEA,QAAIP,GAAG,KAAK,MAAR,IAAkB,CAACA,GAAnB,GAAyBW,WAAW,GAAGD,WAAvC,GAAqDC,WAAW,GAAGD,WAAvE,EAAoF;AAChFR,YAAM,GAAGS,WAAT;AACAP,aAAO,GAAG,CAAC,IAAIO,WAAL,IAAoB,CAA9B;AACH,KAHD,MAGO;AACHV,YAAM,GAAGS,WAAT;AACAP,aAAO,GAAG,CAAC,IAAIO,WAAL,IAAoB,CAA9B;AACH;;AAEDX,aAAS,GAAG,aAAaI,OAAO,KAAKC,OAAO,WAAWH,MAAM,KAAKC,MAAM,GAAxE;AACH;;AAED,QAAMU,OAAO,GAAG,KAAKrB,EAAE,IAAI,YAAY,EAAvC;AACA,SAAO;AAAEA,MAAE,EAAEqB,OAAN;AAAeC,QAAI,EAAExB,IAAI,CAACyB,GAA1B;AAA+Bf;AAA/B,GAAP;AACH","names":["BackgroundImage","Animatable","imagePatternPropsForFill","fill","frame","id","get","isImageObject","undefined","pixelWidth","pixelHeight","imageWidth","imageHeight","transform","fit","scaleX","scaleY","offsetX","offsetY","imageRatio","realWidth","height","realHeight","width","validScaleX","validScaleY","imageId","path","src"],"sources":["../../../src/render/utils/imagePatternPropsForFill.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}
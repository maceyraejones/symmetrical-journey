{"ast":null,"code":"import { useRef, useCallback } from \"react\";\nimport { useDomEvent } from \"framer-motion\";\nimport { debounce } from \"../../render/utils/debounce.js\";\nimport { clamp } from \"../../utils/math.js\";\nexport function useWheelScroll(ref, _ref) {\n  let {\n    enabled,\n    initial,\n    prev,\n    direction,\n    constraints,\n    offsetX,\n    offsetY,\n    onScrollStart,\n    onScroll,\n    onScrollEnd\n  } = _ref;\n  const isWheelScrollActive = useRef(false);\n  const getPointData = useCallback(() => {\n    const point = getPoint(offsetX, offsetY);\n    const data = {\n      point,\n      velocity: {\n        x: offsetX.getVelocity(),\n        y: offsetY.getVelocity()\n      },\n      offset: {\n        x: point.x - initial.x,\n        y: point.y - initial.y\n      },\n      delta: {\n        x: point.x - prev.x,\n        y: point.y - prev.y\n      }\n    };\n    prev.x = point.x;\n    prev.y = point.y;\n    return data;\n  }, []);\n  let handler;\n\n  if (enabled) {\n    function clampX(v) {\n      return constraints.current === null ? v : clamp(v, constraints.current.left, constraints.current.right);\n    }\n\n    function clampY(v) {\n      return constraints.current === null ? v : clamp(v, constraints.current.top, constraints.current.bottom);\n    }\n\n    function updateX(delta) {\n      offsetX.stop();\n      offsetX.set(clampX(offsetX.get() - delta));\n    }\n\n    function updateY(delta) {\n      offsetY.stop();\n      offsetY.set(clampY(offsetY.get() - delta));\n    }\n\n    const debouncedOnScrollEnd = debounce(() => {\n      onScrollEnd && onScrollEnd(getPointData());\n      isWheelScrollActive.current = false;\n    }, 200);\n\n    handler = e => {\n      e.preventDefault();\n\n      if (!isWheelScrollActive.current) {\n        const x = offsetX.get();\n        const y = offsetY.get();\n        initial.x = x;\n        initial.y = y;\n        prev.x = x;\n        prev.y = y;\n        onScrollStart && onScrollStart(getPointData());\n        isWheelScrollActive.current = true;\n      }\n\n      switch (direction) {\n        case \"horizontal\":\n          updateX(e.deltaX);\n          break;\n\n        case \"vertical\":\n          updateY(e.deltaY);\n          break;\n\n        default:\n          updateX(e.deltaX);\n          updateY(e.deltaY);\n      }\n\n      onScroll && onScroll(getPointData());\n      debouncedOnScrollEnd();\n    };\n  } // Appending event directly to DOM as React doesn't have an API for non-passive wheel events.\n\n\n  useDomEvent(ref, \"wheel\", handler, {\n    passive: false\n  });\n}\n\nfunction getPoint(x, y) {\n  return {\n    x: x.get(),\n    y: y.get()\n  };\n}","map":{"version":3,"mappings":"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","names":["useRef","useCallback","useDomEvent","debounce","clamp","useWheelScroll","ref","enabled","initial","prev","direction","constraints","offsetX","offsetY","onScrollStart","onScroll","onScrollEnd","isWheelScrollActive","getPointData","point","getPoint","data","velocity","x","getVelocity","y","offset","delta","handler","clampX","v","current","left","right","clampY","top","bottom","updateX","stop","set","get","updateY","debouncedOnScrollEnd","e","preventDefault","deltaX","deltaY","passive"],"sources":["../../../src/components/Scroll/useWheelScroll.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}
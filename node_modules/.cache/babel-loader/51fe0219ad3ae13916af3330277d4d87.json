{"ast":null,"code":"import process from \"process\";\nimport * as React from \"react\";\nimport { motionValue, animate, useMotionValue } from \"framer-motion\";\nimport { PageContainer, pageContentWrapperType } from \"./PageContainer.js\";\nimport { FrameWithMotion } from \"../../render/presentation/Frame/FrameWithMotion.js\";\nimport { EmptyState } from \"../EmptyState.js\";\nimport { RenderTarget } from \"../../render/types/RenderEnvironment.js\";\nimport { isReactChild, isReactElement } from \"../../utils/type-guards.js\";\nimport { warnOnce } from \"../../utils/warnOnce.js\";\nimport { isMotionValue } from \"../../render/utils/isMotionValue.js\";\nimport { inertia } from \"popmotion\";\nimport { paddingFromProps, makePaddingString } from \"../utils/paddingFromProps.js\";\nimport { injectComponentCSSRules } from \"../../render/utils/injectComponentCSSRules.js\";\nimport { isFiniteNumber } from \"../../render/utils/isFiniteNumber.js\";\nimport { useWheelScroll } from \"../Scroll/useWheelScroll.js\";\nimport { useLayoutId } from \"../../render/utils/useLayoutId.js\";\nimport { useIsomorphicLayoutEffect } from \"../../useIsomorphicLayoutEffect.js\";\n/**\n * The Page component allows you to create horizontally or vertically swipeable areas. It can be\n * imported from the Framer Library and used in code components. Add children to create pages to\n * swipe between. These children will be stretched to the size of the page component by default,\n * but can also be set to auto to maintain their original size.\n *\n * @remarks\n * ```jsx\n * import * as React from \"react\"\n * import { Frame, Page } from \"framer\"\n * export class Page extends React.Component {\n *   render() {\n *     return (\n *       <Page>\n *         <Frame />\n *       </Page>\n *     )\n *   }\n * }\n * ```\n * @public\n */\n\nexport const Page = React.forwardRef(function Page(props, forwardedRef) {\n  const {\n    direction = \"horizontal\",\n    contentWidth = \"stretch\",\n    contentHeight = \"stretch\",\n    alignment = \"start\",\n    currentPage = 0,\n    animateCurrentPageUpdate = true,\n    gap: gapValue = 10,\n    padding = 0,\n    momentum = false,\n    dragEnabled = true,\n    defaultEffect = \"none\",\n    background = \"transparent\",\n    overflow = \"hidden\",\n    __fromCodeComponentNode,\n    effect,\n    children,\n    contentOffsetX,\n    contentOffsetY,\n    onChangePage,\n    onScrollStart,\n    onScroll,\n    onDragStart,\n    onDrag,\n    onDragEnd,\n    directionLock,\n    onScrollEnd,\n    onDirectionLock,\n    onUpdate,\n    wheelEnabled = false,\n    layoutId: specificLayoutId,\n    ...rest\n  } = props;\n  const layoutId = useLayoutId(props, {\n    specificLayoutId,\n    postfix: \"page\"\n  });\n  const containerProps = { ...rest,\n    background\n  };\n  const hasMountedRef = React.useRef(false);\n  const hasFixedSize = RenderTarget.hasRestrictions() && props.__fromCodeComponentNode && isFiniteNumber(containerProps.width) && isFiniteNumber(containerProps.height);\n\n  if (!hasFixedSize && __fromCodeComponentNode && !containerProps.__fromCanvasComponent) {\n    containerProps.width = \"100%\";\n    containerProps.height = \"100%\";\n    containerProps._constraints = {\n      enabled: true\n    };\n  }\n\n  const {\n    initial,\n    prev\n  } = React.useRef({\n    initial: {\n      x: 0,\n      y: 0\n    },\n    prev: {\n      x: 0,\n      y: 0\n    }\n  }).current;\n  const isHorizontal = direction === \"horizontal\";\n  let gap = gapValue;\n\n  if (gap < 0) {\n    warnOnce(`The 'gap' property of Page component can not be negative, but is ${gapValue}.`);\n    gap = 0;\n  }\n\n  injectComponentCSSRules();\n  const pageCount = React.Children.count(children);\n  const maxOffsetRef = React.useRef(0);\n  const constraints = React.useRef({\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0\n  });\n  const fallbackContainerRef = React.useRef(null);\n  const containerRef = forwardedRef || fallbackContainerRef;\n  const scrollableRef = React.useRef(null);\n  const pageEffectValuesRef = React.useRef([]);\n  const pageRectsRef = React.useRef([]); // On the Framer Canvas we need to use `useMotionValue` because it falls\n  // back to a React state update in static mode, allowing the component to\n  // update. Since you cannot conditionally render a hook, we use 0 as the\n  // default value if the React prop is **already** a motion value, and then\n  // simply do not use the returned motion value.\n\n  const internalX = useMotionValue(isMotionValue(contentOffsetX) ? 0 : contentOffsetX ?? 0);\n  const internalY = useMotionValue(isMotionValue(contentOffsetY) ? 0 : contentOffsetY ?? 0);\n  const contentOffsetRef = React.useRef({\n    x: isMotionValue(contentOffsetX) ? contentOffsetX : internalX,\n    y: isMotionValue(contentOffsetY) ? contentOffsetY : internalY\n  });\n  const currentContentPageRef = React.useRef(currentPage);\n  const propsBoundedCurrentPageRef = React.useRef(currentPage); // Bounded version of props.currentPage\n\n  const latestPropsRef = React.useRef(props);\n  latestPropsRef.current = props;\n  const lastDirectionRef = React.useRef(props.direction);\n  const snapToPage = useSnapToPage(currentContentPageRef, contentOffsetRef, isHorizontal);\n  const [_, setForceUpdateCount] = React.useState(0);\n  const containerSizeRef = React.useRef({\n    width: 200,\n    height: 200\n  });\n\n  if (hasFixedSize && isFiniteNumber(containerProps.width) && isFiniteNumber(containerProps.height)) {\n    containerSizeRef.current.width = containerProps.width;\n    containerSizeRef.current.height = containerProps.height;\n  }\n\n  const updateOnResize = React.useCallback(() => {\n    if (!hasFixedSize) setForceUpdateCount(v => v + 1);\n  }, [hasFixedSize]); // Setup a listener on the window's size. If it changes, and we are in\n  // preview, we may need to render to trigger motion's onLayoutMeasure to\n  // update the constraints.\n\n  React.useEffect(() => {\n    if (RenderTarget.current() !== RenderTarget.preview) return;\n    globalThis.addEventListener(\"resize\", updateOnResize);\n    return () => {\n      globalThis.removeEventListener(\"resize\", updateOnResize);\n    };\n  }, [updateOnResize]);\n\n  const applyEffects = () => {\n    pageEffectValuesRef.current.forEach((effectDictionary, index) => {\n      const values = effectValues(index, latestPropsRef, pageRectsRef, contentOffsetRef, maxOffsetRef);\n      if (!effectDictionary || !values) return;\n\n      for (const key in values) {\n        if (isMotionValue(effectDictionary[key])) {\n          // Because these are the actual Animatable values passed to the Frame\n          // Updating their value will modify the Frame\n          effectDictionary[key].set(values[key]);\n        }\n      }\n    });\n  };\n\n  const updateMaxOffsetFromPageContents = containerSize => {\n    const newPageContentRects = getPageContentRects(containerRef, containerSize, direction, gap);\n    if (newPageContentRects) pageRectsRef.current = newPageContentRects;\n    const newMaxOffset = getMaxOffset(containerSizeRef.current, pageRectsRef.current, direction, latestPropsRef.current);\n\n    if (newMaxOffset !== maxOffsetRef.current) {\n      maxOffsetRef.current = newMaxOffset;\n      constraints.current.top = -newMaxOffset;\n      constraints.current.left = -newMaxOffset;\n      /**\n       * @FIXME Without this forced render, if you resize Page on the\n       * canvas when it's current page is not 0, you will see flashes of\n       * the previous page. This happens when the MotionValue for the x or\n       * y offset is out of sync with the size of the Page and the Page\n       * contents, which manifests as the current page not being\n       * transformed far enough from the start point.\n       *\n       * Unfortunately, it's not 100% clear why this force render is\n       * required.\n       *\n       * Since the offset is a Motion Value, its updates are not tied to\n       * React renders, so it stays up to date based on a 60fps render\n       * cycle run by framer-motion. However, this setState is called\n       * inside a useLayoutEffect hook. If an update is scheduled during a\n       * useLayoutEffect hook, painting is deferred until no more updates\n       * are scheduled. In the case of this function, the first\n       * useLayoutEffect after a resize will trigger this React render,\n       * painting will be deferred, and the same useLayoutEffect will run\n       * a second time, finally calling this function a second time. On\n       * the second invocation of this function, since we cache the\n       * previous maxOffset to a ref, this state update will not get\n       * called. Since no updates are scheduled in the second render,\n       * React will finally paint the update.\n       *\n       * Since this bug only happens in Safari in some circumstances when\n       * resizing on the canvas at 60fps, it's possible that there is a\n       * case where when we do not defer painting in the first\n       * useLayoutEffect, the React render and the MotionValue update are\n       * not in sync, causing a brief flash.\n       *\n       * However, if we can figure out a way to ensure those updates\n       * happen in sync, we should remove this React render as it is\n       * unnecessary and will only hinder performance when used elsewhere,\n       * such as generated components where you can resize a Page while\n       * performing a page transition.\n       */\n\n      if (RenderTarget.current() === RenderTarget.canvas) setForceUpdateCount(v => v + 1);\n    }\n  }; // Measure the container size, and return the size if it has changed.\n\n\n  const measureContainerSize = () => {\n    const element = containerRef.current;\n    if (!element) return null;\n    const {\n      offsetWidth,\n      offsetHeight\n    } = element;\n    const currentSize = containerSizeRef.current;\n\n    if (offsetWidth !== currentSize.width || offsetHeight !== currentSize.height) {\n      containerSizeRef.current = {\n        width: offsetWidth,\n        height: offsetHeight\n      };\n      return containerSizeRef.current;\n    }\n\n    return null;\n  };\n\n  const updateAndSnapToPage = function (newPage) {\n    let mount = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const newBoundedCurrentPage = getBoundedCurrentPage(newPage, pageCount);\n    const boundedCurrentPageDidChange = newBoundedCurrentPage !== propsBoundedCurrentPageRef.current;\n\n    if (boundedCurrentPageDidChange) {\n      propsBoundedCurrentPageRef.current = newBoundedCurrentPage;\n      updateCurrentPage(newBoundedCurrentPage, currentContentPageRef, !mount ? onChangePage : undefined);\n    } // Finally, even if the current page did not change, the offset may\n    // have. Snap the current page to the latest offset.\n\n\n    const offset = offsetForPage(newBoundedCurrentPage, pageCount, pageRectsRef, isHorizontal, maxOffsetRef);\n    const animated = animateCurrentPageUpdate && RenderTarget.current() !== RenderTarget.canvas && !mount;\n    snapToPage(newBoundedCurrentPage, offset, {\n      animated\n    });\n  }; // Handle setting up MotionValue handlers, performing initial measurements,\n  // and setting the initial dragConstraints on mount. Finally snap to the\n  // current page without an animation. Mount does not trigger motion's\n  // onLayoutMeasure handler.\n\n\n  useIsomorphicLayoutEffect(() => {\n    if (hasMountedRef.current) return;\n    /**\n     * Defer the measurement of drag constraints until the next animation frame.\n     * When the preview is closed and reopened, it's switched from display: none\n     * to display: block. When an element is the child of display: none its measurements\n     * return `0`. When this layout effect fires, the preview iframe *is* set to\n     * display: block but in a twist of browser render scheduling this hasn't yet\n     * affected the iframe contents. So by deferring to the following animation frame\n     * we allow the iframe contents to take on dimension again.\n     * Fixes: https://github.com/framer/company/issues/23200\n     */\n\n    requestAnimationFrame(() => {\n      // If the Page has been mounted with a non-default current page, update\n      // the ref on mount so that the useEffect that watches changes to the\n      // currentPage prop doesn't fire incorrectly on subsequent renders.\n      currentContentPageRef.current = currentPage;\n      const contentOffset = contentOffsetRef.current;\n      contentOffset.x.onChange(applyEffects);\n      contentOffset.y.onChange(applyEffects);\n      applyEffects();\n      hasMountedRef.current = true;\n      const containerSize = measureContainerSize() ?? containerSizeRef.current;\n      updateMaxOffsetFromPageContents(containerSize);\n      updateAndSnapToPage(currentContentPageRef.current, true);\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n  // Handle user update to the currentPage from React props. This runs after\n  // onLayoutMeasure, so the current offsets will already be set based on any\n  // updates to the children or container sizes. Must only fire when\n  // currentPage changes.\n\n  React.useEffect(() => {\n    if (currentPage !== currentContentPageRef.current) updateAndSnapToPage(currentPage);\n  }, [currentPage]); // eslint-disable-line react-hooks/exhaustive-deps\n  // Measure the container size, and measure the children sizes when motion\n  // flags that it's performing a measure with any transforms removed.\n\n  const handleMeasureLifecycle = () => {\n    // Measure the container, update the ref, and return the Size if it has changed.\n    const newContainerSize = measureContainerSize(); // Get the rects of each PageContainer, and calculate and update drag\n    // constraints based on the current container size.\n\n    updateMaxOffsetFromPageContents(newContainerSize ?? containerSizeRef.current); // Calculate if the Page's offset transform needs to be updated\n    // to either keep the current page centered, or snap to a new page.\n\n    updateAndSnapToPage(currentContentPageRef.current); // Finally, if the measured size or direction has changed, ensure that the offset for the\n    // opposite direction is reset to 0. E.g. if the direction is\n    // horizontal, reset the vertical scroll to 0.\n\n    if (newContainerSize || direction !== lastDirectionRef.current) {\n      if (direction === \"horizontal\") {\n        contentOffsetRef.current.y.set(0);\n      } else {\n        contentOffsetRef.current.x.set(0);\n      }\n\n      lastDirectionRef.current = direction;\n    }\n  }; // Motion's onLayoutMeasure is not called on the canvas, so if we are on\n  // the canvas, we trigger the same callback we pass to onLayoutMeasure here\n  // in a useLayoutEffect. This is fine because we don't have to worry about\n  // un-setting parent transforms for measurements on the canvas.\n\n\n  useIsomorphicLayoutEffect(() => {\n    if (RenderTarget.current() !== RenderTarget.canvas) return;\n    handleMeasureLifecycle();\n  });\n\n  const onDragStartHandler = (event, info) => {\n    if (onScrollStart) onScrollStart(info);\n    if (onDragStart) onDragStart(event, info);\n    prev.x = initial.x = info.point.x;\n    prev.y = initial.y = info.point.y;\n  };\n\n  const onDragHandler = (event, info) => {\n    if (onScroll) onScroll(info);\n    if (onDrag) onDrag(event, info);\n    prev.x = info.point.x;\n    prev.y = info.point.y;\n  };\n\n  const onDragTransitionEnd = () => {\n    if (props.onDragTransitionEnd) props.onDragTransitionEnd();\n\n    if (onScrollEnd) {\n      const {\n        x,\n        y\n      } = contentOffsetRef.current;\n      const point = {\n        x: x.get(),\n        y: y.get()\n      };\n      onScrollEnd({\n        point,\n        velocity: {\n          x: x.getVelocity(),\n          y: y.getVelocity()\n        },\n        offset: {\n          x: point.x - initial.x,\n          y: point.y - initial.y\n        },\n        delta: {\n          x: point.x - prev.x,\n          y: point.y - prev.y\n        }\n      });\n    }\n  };\n\n  const onDragEndHandler = async (event, info) => {\n    const contentOffset = isHorizontal ? contentOffsetRef.current.x : contentOffsetRef.current.y;\n    contentOffset.stop();\n    const startPosition = contentOffset.get();\n    const axis = isHorizontal ? \"x\" : \"y\";\n    const velocity = info.velocity[axis];\n    let index = nearestPageIndex(pageRectsRef.current, startPosition, startPosition, isHorizontal, momentum);\n\n    if (velocity) {\n      /**\n       * TODO: This is a bit hacky. We're hijacking the inertia animation for the modifyTarget functionality. Maybe this is information we can\n       * pass through the `onDragEnd` event handler if `dragMomentum` is `true`.\n       */\n      inertia({\n        from: startPosition,\n        velocity,\n        modifyTarget: endPosition => {\n          index = nearestPageIndex(pageRectsRef.current, startPosition, endPosition, isHorizontal, momentum);\n          return endPosition;\n        }\n      }).stop();\n    }\n\n    updateCurrentPage(index, currentContentPageRef, onChangePage);\n    const offset = offsetForPage(index, pageCount, pageRectsRef, isHorizontal, maxOffsetRef);\n    if (onDragEnd) onDragEnd(event, info);\n    const handler = contentOffsetRef.current[axis];\n    animate(handler, offset, {\n      type: \"spring\",\n      from: startPosition,\n      velocity,\n      stiffness: 500,\n      damping: 50,\n      onComplete: onDragTransitionEnd\n    });\n  };\n\n  pageEffectValuesRef.current = [];\n  const childComponents = React.Children.map(children, (child, index) => {\n    if (!isReactChild(child) || !isReactElement(child)) {\n      return child;\n    }\n\n    const update = {\n      right: undefined,\n      bottom: undefined,\n      top: undefined,\n      left: undefined,\n      _constraints: {\n        enabled: false\n      }\n    };\n\n    if (containerProps.__fromCanvasComponent) {\n      update.style = child.props.style ?? {};\n      if (contentWidth === \"stretch\") update.style.width = \"100%\";\n      if (contentHeight === \"stretch\") update.style.height = \"100%\";\n    } else {\n      if (contentWidth === \"stretch\") update.width = \"100%\";\n      if (contentHeight === \"stretch\") update.height = \"100%\";\n    }\n\n    let effectDictionary;\n    const values = effectValues(index, latestPropsRef, pageRectsRef, contentOffsetRef, maxOffsetRef);\n\n    if (values) {\n      // We use motion values so we can set them in the onMove function\n      effectDictionary = {};\n\n      for (const key in values) {\n        effectDictionary[key] = motionValue(values[key]);\n      }\n    }\n\n    pageEffectValuesRef.current.push(effectDictionary);\n    return React.createElement(PageContainer, {\n      key: index,\n      effect: effectDictionary,\n      dragEnabled: dragEnabled,\n      direction: direction,\n      contentHeight: contentHeight,\n      contentWidth: contentWidth,\n      alignment: alignment,\n      gap: gap,\n      isLastPage: index === pageCount - 1,\n      contentOffsetRef: contentOffsetRef,\n      constraintsRef: constraints,\n      directionLock: directionLock,\n      onDragStart: onDragStartHandler,\n      onDrag: onDragHandler,\n      onDragEnd: onDragEndHandler,\n      layoutId: layoutId ? `${layoutId}-${index}` : undefined\n    }, React.cloneElement(child, update));\n  });\n  useWheelScroll(scrollableRef, {\n    enabled: wheelEnabled,\n    initial,\n    prev,\n    direction,\n    constraints,\n    offsetX: contentOffsetRef.current.x,\n    offsetY: contentOffsetRef.current.y,\n    onScrollStart,\n    onScroll,\n    onScrollEnd\n  });\n  return React.createElement(FrameWithMotion, {\n    preserve3d: false,\n    perspective: hasEffect(props) ? 1200 : undefined,\n    overflow: overflow,\n    ...containerProps,\n    layoutId: layoutId,\n    ref: containerRef,\n    onLayoutMeasure: handleMeasureLifecycle\n  }, React.createElement(FrameWithMotion, {\n    \"data-framer-component-type\": \"Page\",\n    ref: scrollableRef,\n    background: null,\n    x: contentOffsetRef.current.x,\n    y: contentOffsetRef.current.y,\n    width: \"100%\",\n    height: \"100%\",\n    preserve3d: true,\n    layout: true,\n    layoutId: layoutId !== undefined ? layoutId + \"-page\" : undefined,\n    style: {\n      padding: makePaddingString(paddingFromProps(props)),\n      display: \"flex\",\n      flexDirection: isHorizontal ? \"row\" : \"column\"\n    }\n  }, React.createElement(EmptyState, {\n    title: \"Page\",\n    description: \"Click and drag the connector to any frame on the canvas \\u2192\",\n    children: children,\n    size: containerSizeRef.current,\n    insideUserCodeComponent: !__fromCodeComponentNode\n  }), childComponents));\n}); // Effects\n\nfunction cubeEffect(info) {\n  const {\n    normalizedOffset,\n    direction\n  } = info;\n  const isHorizontal = direction === \"horizontal\";\n  return {\n    originX: normalizedOffset < 0 ? 1 : 0,\n    originY: normalizedOffset < 0 ? 1 : 0,\n    rotateY: isHorizontal ? Math.min(Math.max(-90, normalizedOffset * 90), 90) : 0,\n    rotateX: isHorizontal ? 0 : Math.min(Math.max(-90, normalizedOffset * -90), 90),\n    backfaceVisibility: \"hidden\",\n    WebkitBackfaceVisibility: \"hidden\"\n  };\n}\n\nfunction coverflowEffect(info) {\n  const {\n    normalizedOffset,\n    direction,\n    size\n  } = info;\n  const isHorizontal = direction === \"horizontal\";\n  return {\n    rotateY: isHorizontal ? Math.min(45, Math.max(-45, normalizedOffset * -45)) : 0,\n    rotateX: isHorizontal ? 0 : Math.min(45, Math.max(-45, normalizedOffset * 45)),\n    originX: isHorizontal ? normalizedOffset < 0 ? 0 : 1 : 0.5,\n    originY: isHorizontal ? 0.5 : normalizedOffset < 0 ? 0 : 1,\n    x: isHorizontal ? `${normalizedOffset * -25}%` : 0,\n    y: isHorizontal ? 0 : `${normalizedOffset * -25}%`,\n    z: -Math.abs(normalizedOffset),\n    scale: 1 - Math.abs(normalizedOffset / 10)\n  };\n}\n\nfunction calcPileAxisOffset(offset, length) {\n  return offset * length - offset * 8;\n}\n\nfunction pileEffect(info) {\n  const {\n    normalizedOffset,\n    direction,\n    size\n  } = info;\n  const isHorizontal = direction === \"horizontal\";\n  const absoluteOffset = Math.abs(normalizedOffset);\n  return {\n    x: normalizedOffset < 0 && isHorizontal ? calcPileAxisOffset(absoluteOffset, size.width) : 0,\n    y: normalizedOffset < 0 && !isHorizontal ? calcPileAxisOffset(absoluteOffset, size.height) : 0,\n    scale: normalizedOffset < 0 ? 1 - absoluteOffset / 50 : 1\n  };\n}\n\nfunction wheelEffect(info) {\n  const {\n    normalizedOffset,\n    direction,\n    size\n  } = info;\n  const isHorizontal = direction === \"horizontal\";\n  const originZ = (isHorizontal ? size.width : size.height) * 18 / (2 * Math.PI);\n  const rotateX = isHorizontal ? 0 : normalizedOffset * -20;\n  const rotateY = isHorizontal ? normalizedOffset * 20 : 0;\n  const y = isHorizontal ? 0 : normalizedOffset * -size.height;\n  const x = isHorizontal ? normalizedOffset * -size.width : 0;\n  return {\n    opacity: 1 - Math.abs(normalizedOffset) / 4,\n    transform: `translate(${x}px, ${y}px) translateZ(-${originZ}px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateZ(${originZ}px)`\n  };\n}\n\nfunction getDefaultEffect(type) {\n  switch (type) {\n    case \"cube\":\n      return cubeEffect;\n\n    case \"coverflow\":\n      return coverflowEffect;\n\n    case \"pile\":\n      return pileEffect;\n\n    case \"wheel\":\n      return wheelEffect;\n\n    default:\n      return null;\n  }\n}\n\nfunction nearestPageIndex(pageRects, startPosition, endPosition, isHorizontalDirection, allowSkippingPages) {\n  const distanceToStart = function (rect) {\n    const rectPosition = isHorizontalDirection ? rect.x : rect.y;\n    return Math.abs(rectPosition + startPosition);\n  };\n\n  const distanceToEnd = function (rect) {\n    const rectPosition = isHorizontalDirection ? rect.x : rect.y;\n    return Math.abs(rectPosition + endPosition);\n  };\n\n  if (allowSkippingPages) {\n    const closestPages = [...pageRects].sort((a, b) => distanceToEnd(a) - distanceToEnd(b));\n    return pageRects.indexOf(closestPages[0]);\n  } else {\n    const closestToStart = [...pageRects].sort((a, b) => distanceToStart(a) - distanceToStart(b));\n    if (closestToStart.length === 1) return pageRects.indexOf(closestToStart[0]);\n    const pageA = closestToStart[0];\n    const pageB = closestToStart[1];\n    const closestPages = [pageA, pageB].sort((a, b) => distanceToEnd(a) - distanceToEnd(b));\n    return pageRects.indexOf(closestPages[0]);\n  }\n}\n\nfunction getPageContentRects(containerRef, containerSize, direction, gap) {\n  const containerElement = containerRef.current;\n  if (!containerElement) return;\n  const contentWrappers = [];\n  containerElement.firstChild?.childNodes.forEach(node => {\n    const childNode = node.firstChild;\n    if (!(childNode instanceof HTMLElement)) return;\n    const componentType = childNode.getAttribute(\"data-framer-component-type\");\n\n    if (componentType === pageContentWrapperType) {\n      contentWrappers.push(childNode);\n    }\n  });\n  const sizes = [];\n  contentWrappers.forEach(contentWrapper => {\n    if (contentWrapper instanceof HTMLElement && contentWrapper.firstChild instanceof HTMLElement) {\n      let width = contentWrapper.firstChild.offsetWidth;\n      let height = contentWrapper.firstChild.offsetHeight;\n\n      if (process.env.NODE_ENV === \"test\") {\n        width = 100;\n        height = 100;\n      }\n\n      sizes.push({\n        width,\n        height\n      });\n    } else {\n      sizes.push(null);\n    }\n  });\n  let maxX = 0;\n  let maxY = 0;\n  const isHorizontal = direction === \"horizontal\";\n  return sizes.map(queriedSize => {\n    const size = queriedSize || containerSize;\n    const x = maxX;\n    const y = maxY;\n\n    if (isHorizontal) {\n      maxX += size.width + gap;\n    } else {\n      maxY += size.height + gap;\n    }\n\n    return { ...size,\n      x,\n      y\n    };\n  });\n}\n\nfunction getMaxOffset(containerSize, pageContentRects, direction, paddingProps) {\n  const lastPageRect = pageContentRects[pageContentRects.length - 1];\n  if (!lastPageRect) return 0;\n  const paddingSides = paddingFromProps(paddingProps);\n  const isHorizontal = direction === \"horizontal\";\n  const paddingStart = isHorizontal ? paddingSides.left : paddingSides.top;\n  const paddingEnd = isHorizontal ? paddingSides.right : paddingSides.bottom;\n  const pageWidth = isHorizontal ? lastPageRect.width : lastPageRect.height;\n  const containerWidth = isHorizontal ? containerSize.width : containerSize.height;\n  const freeSpace = containerWidth - paddingStart - paddingEnd - pageWidth;\n  const target = isHorizontal ? lastPageRect.x : lastPageRect.y; // Scroll offset can't be negative, if it is accidentally negative, it will incorrectly offset the page contents from the starting point.\n\n  if (freeSpace <= 0) return Math.max(target, 0);\n  return Math.max(target - freeSpace, 0);\n}\n\nfunction offsetForPage(index, pageCount, pageRectsRef, isHorizontal, maxOffsetRef) {\n  const pageIndex = Math.max(0, Math.min(pageCount - 1, index));\n  const currentPageRect = pageRectsRef.current[pageIndex];\n\n  if (!currentPageRect) {\n    return 0;\n  }\n\n  if (isHorizontal) {\n    return -Math.min(currentPageRect.x, maxOffsetRef.current);\n  } else {\n    return -Math.min(currentPageRect.y, maxOffsetRef.current);\n  }\n}\n\nfunction useSnapToPage(currentContentPageRef, contentOffsetRef, isHorizontal) {\n  return (pageIndex, offset, options) => {\n    currentContentPageRef.current = pageIndex;\n    const contentOffset = isHorizontal ? contentOffsetRef.current.x : contentOffsetRef.current.y;\n\n    if (!options || !options.animated) {\n      contentOffset.set(offset);\n      return;\n    } // else\n\n\n    const axis = isHorizontal ? \"x\" : \"y\";\n    animate(contentOffsetRef.current[axis], offset, {\n      type: \"spring\",\n      from: contentOffset.get(),\n      velocity: contentOffset.getVelocity(),\n      stiffness: 500,\n      damping: 50\n    });\n  };\n} // The current page property is capped to the number of children when positive, and cycles from last when negative\n\n\nfunction getBoundedCurrentPage(pageIndex, pageCount) {\n  return pageIndex >= 0 ? Math.min(pageIndex, pageCount - 1) : (pageIndex % pageCount + pageCount) % pageCount;\n}\n\nfunction effectValues(index, latestPropsRef, pageRectsRef, contentOffsetRef, maxOffsetRef) {\n  const {\n    direction: latestDirection = \"horizontal\",\n    defaultEffect: latestDefaultEffect,\n    effect: latestEffect,\n    gap: latestGap = 0\n  } = latestPropsRef.current;\n  const latestIsHorizontal = latestDirection === \"horizontal\";\n  const pageRect = pageRectsRef.current[index] || {\n    x: latestIsHorizontal ? index * 200 + latestGap : 0,\n    y: latestIsHorizontal ? 0 : index * 200 + latestGap,\n    width: 200,\n    height: 200\n  };\n  const effectFunction = latestEffect || getDefaultEffect(latestDefaultEffect);\n  if (!effectFunction) return null;\n  let offset;\n  let normalizedOffset;\n  const contentOffset = contentOffsetRef.current;\n  const maxScrollOffset = maxOffsetRef.current;\n\n  if (latestIsHorizontal) {\n    offset = Math.min(pageRect.x, maxScrollOffset) + (contentOffset ? contentOffset.x.get() : 0);\n    normalizedOffset = offset / (pageRect.width + latestGap);\n  } else {\n    offset = Math.min(pageRect.y, maxScrollOffset) + (contentOffset ? contentOffset.y.get() : 0);\n    normalizedOffset = offset / (pageRect.height + latestGap);\n  }\n\n  const size = {\n    width: pageRect.width,\n    height: pageRect.height\n  };\n  return effectFunction({\n    offset,\n    normalizedOffset,\n    size,\n    index,\n    direction: latestDirection,\n    gap: latestGap,\n    pageCount: pageRectsRef.current.length\n  });\n}\n\nfunction hasEffect(props) {\n  return !!props.effect || !!getDefaultEffect(props.defaultEffect);\n}\n\nfunction updateCurrentPage(newPageIndex, currentContentPageRef, onChangePage) {\n  if (currentContentPageRef.current === newPageIndex) return;\n  if (onChangePage) onChangePage(newPageIndex, currentContentPageRef.current);\n  currentContentPageRef.current = newPageIndex;\n}","map":{"version":3,"mappings":"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","names":["process","React","motionValue","animate","useMotionValue","PageContainer","pageContentWrapperType","FrameWithMotion","EmptyState","RenderTarget","isReactChild","isReactElement","warnOnce","isMotionValue","inertia","paddingFromProps","makePaddingString","injectComponentCSSRules","isFiniteNumber","useWheelScroll","useLayoutId","useIsomorphicLayoutEffect","Page","forwardRef","props","forwardedRef","direction","contentWidth","contentHeight","alignment","currentPage","animateCurrentPageUpdate","gap","gapValue","padding","momentum","dragEnabled","defaultEffect","background","overflow","__fromCodeComponentNode","effect","children","contentOffsetX","contentOffsetY","onChangePage","onScrollStart","onScroll","onDragStart","onDrag","onDragEnd","directionLock","onScrollEnd","onDirectionLock","onUpdate","wheelEnabled","layoutId","specificLayoutId","rest","postfix","containerProps","hasMountedRef","useRef","hasFixedSize","hasRestrictions","width","height","__fromCanvasComponent","_constraints","enabled","initial","prev","x","y","current","isHorizontal","pageCount","Children","count","maxOffsetRef","constraints","top","left","right","bottom","fallbackContainerRef","containerRef","scrollableRef","pageEffectValuesRef","pageRectsRef","internalX","internalY","contentOffsetRef","currentContentPageRef","propsBoundedCurrentPageRef","latestPropsRef","lastDirectionRef","snapToPage","useSnapToPage","_","setForceUpdateCount","useState","containerSizeRef","updateOnResize","useCallback","v","useEffect","preview","globalThis","addEventListener","removeEventListener","applyEffects","forEach","effectDictionary","index","values","effectValues","key","set","updateMaxOffsetFromPageContents","containerSize","newPageContentRects","getPageContentRects","newMaxOffset","getMaxOffset","canvas","measureContainerSize","element","offsetWidth","offsetHeight","currentSize","updateAndSnapToPage","newPage","mount","newBoundedCurrentPage","getBoundedCurrentPage","boundedCurrentPageDidChange","updateCurrentPage","undefined","offset","offsetForPage","animated","requestAnimationFrame","contentOffset","onChange","handleMeasureLifecycle","newContainerSize","onDragStartHandler","event","info","point","onDragHandler","onDragTransitionEnd","get","velocity","getVelocity","delta","onDragEndHandler","stop","startPosition","axis","nearestPageIndex","from","modifyTarget","endPosition","handler","type","stiffness","damping","onComplete","childComponents","map","child","update","style","push","isLastPage","constraintsRef","cloneElement","offsetX","offsetY","preserve3d","perspective","hasEffect","ref","onLayoutMeasure","layout","display","flexDirection","title","description","size","insideUserCodeComponent","cubeEffect","normalizedOffset","originX","originY","rotateY","Math","min","max","rotateX","backfaceVisibility","WebkitBackfaceVisibility","coverflowEffect","z","abs","scale","calcPileAxisOffset","length","pileEffect","absoluteOffset","wheelEffect","originZ","PI","opacity","transform","getDefaultEffect","pageRects","isHorizontalDirection","allowSkippingPages","distanceToStart","rect","rectPosition","distanceToEnd","closestPages","sort","a","b","indexOf","closestToStart","pageA","pageB","containerElement","contentWrappers","firstChild","childNodes","node","childNode","HTMLElement","componentType","getAttribute","sizes","contentWrapper","env","NODE_ENV","maxX","maxY","queriedSize","pageContentRects","paddingProps","lastPageRect","paddingSides","paddingStart","paddingEnd","pageWidth","containerWidth","freeSpace","target","pageIndex","currentPageRect","options","latestDirection","latestDefaultEffect","latestEffect","latestGap","latestIsHorizontal","pageRect","effectFunction","maxScrollOffset","newPageIndex"],"sources":["../../../src/components/Page/EmulatedPage.tsx"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}